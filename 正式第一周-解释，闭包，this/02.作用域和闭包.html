<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>作用域和闭包</title>
</head>
<body>
<script>
    /*
    * 当一个方法在运行的时候，就会形成一个私有的作用域，
    * 在这个作用域里，里面定义的变量不会受到上一级作用域或其它作用域的影响，不会和全局或其它作用域里的变量有冲突。
    * 这个由方法运行而产生的私有作用域，就叫闭包。
    * 我们应该把闭包理解为函数运行机制，而不是某种形式。
    * 预解释的代码不会受到return的影响。
    * */

    /*闭包其实就是函数在运行的时候产生的那个私有作用域。*/
    /*闭包的作用说的更直白一些就是为了让变量更安全，让一个环境中的变量与其它环境中的变量隔离开不产生冲突。*/
//    var name='china';
//    var age=5000;
//    //定义一个匿名函数再让这个匿名函数运行，并给匿名函数传参数
//    (function(chinaName,chinaAge){	//这里是给匿名方法定义的形式参数
//        var name='珠峰培训'
//        var  age=4;
//        alert(chinaName+'有'+chinaAge+'多的历史了。'+name+'有'+age+'多的历史了。');
//    })(name,age);	//这里是给匿名方法传的参数

    /*在这个例子里，定义了两个全局变量name和age，在下面的匿名函数里也定义了变量name和age,但这两组相同的变量互不影响，匿名方法里的变量属于自己的私有的作用域，这个运行的匿名方法就形成了闭包。如果在这个匿名方法想用到全局变量name和age,可以通过传参数的方式传给这个匿名函数。
    上面这种写法和下面的代码同效（只不过一个是匿名函数一个是有名函数而已）：*/
//    function fn(chinaName,chinaAge){    //给刚才的匿名函数起了个名字叫fn
//        var name='珠峰培训'
//        var age=4;
//        alert(chinaName+'有'+chinaAge+'多的历史了。'+name+'有'+age+'多的历史了。');
//    }
//    fn(name,age); //让函数运行


//    定义在闭包里的变量和函数在全局下是不能使用的。那我们怎么能让定义在闭包里的函数能在闭包外面使用呢？方法很简单，就是把它赋值给一个全局变量，如下例：
//    (function(chinaName,chinaAge){
//        var name='珠峰培训'
//        var age=4;
//        function speciality(){//这个函数是私有，外部不能访问。这就形成了一个闭包方法
//            alert(name+'的特长是javaScript培训,已经做了'+age+'年多了');
//        }
//        //如果把这个函数赋给window的zhufengpeixun这个属性，就相当于多了一个全局函数zhufengpeixun，那我们就可以在外部调用zhufengpeixun这个函数了，其实就是调用speciality这个函数
//        window.zhufengpeixun=speciality;
//    })();
//    zhufengpeixun(); //运行这个方法，弹出：珠峰培训的特长是javaScript培训,已经做了4年多了
//    zhufengpeixun这个方法是在闭包里定义的，并且这个方法里用到的变量也是闭包内部的私有变量，不会和其它作用域下的变量冲突，相对来说是比较安全的。



    function fn(){
        var n=9;
    }
    fn();
    fn();
    alert(n);
    (function fn(){
        var n=9;
    })();
</script>
</body>
</html>