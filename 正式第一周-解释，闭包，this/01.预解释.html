<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预解释</title>
</head>
<body>

<script>
    /*
    * 用var 去声明一个变量的时候，只是被提前声明，不会被赋值，就是只是被预解释，但不是执行等号的这个赋值运算。
    * 而用function去定义变量的时候，不但会被提前声明，还要被初始化一个值。
    * 预解释的代码不会受到return的影响。
    * */


    //1.代码运行之前，先扫描一遍有没有带var关键字的脚本，先去内存里给变量开一个空间。(栈内存)
    // 这会的变量没有值（没有数据），则用undefined来表示。undefined表示不存在的标识（记号）
    //这样的预解释叫声明（declear）

    //2.当代码正常执行的时候，在内存里分配一个空间保存”珠峰培训”这个数据。

    //3.让数据”珠峰培训”和变量a发生关联，就是把”珠峰培训”赋给变量a。这里相当于定义（defined），此后再输出a，才是"珠峰培训"这个字符串呢。

    alert(a);//在定义之前就可以输出，但输出的结果是undefined
    var a = "珠峰培训"//在这里用var关键字定义
    alert(a);//在定义之后，才会输出"珠峰培训"




    /*
    * function
    * 预定义
    * 在代码执行之前，把所有带function关键字的扫描一遍，然后定义变量，并且给这个函数名赋了值（就是函数体）
    * */
//    fn();//在定义之前执行是可以的
//    function fn(){alert("我可以在定义之前运行");}



    /*
     var n=9;
     var s=’str’;
     function fn(){
     alert(n);
     alert(s);
     n=7;
     var n=6;
     };
     fn();//运行这个函数，会输出什么结果?
    第一次很多人以为会输出9，但正确的输出结果是undefined。
    为什么会这样呢？这就涉及到js中的变量预解释和变量作用域的概念了。


    fn这个方法运行的过程是这样的：
    当它运行的时候，先把里面带var关键字和带function关键字的变量先解释，
    这个方法里有var n=6，那就会先把n这个变量给定义了，
    但后面的赋值动作不做（n=6是个表达式，这个赋值的表达式不能预解释），
    就相当于在fn这个方法里，已经有n这个变量了，但是还未赋值。
    预解释之后才开始按顺序执行，当执行到alert(n)的时候，变量n其实已经定义过了，
    但是还没有赋值，定义而未赋值的变量值就是undefined。


    对第二个alert(s)会输出str这个字符串大家应该没有什么异意。
    在fn这个方法运行的时候，会形成一个自己的私有作用域，
    当用到s这个变量时，先在fn这个变量作用域里找s这个变量，
    如果找不到，则往上一级作用域里找，找到了则以这个级的这个变量为准，
    如果还找不到，则再往上一级作用域里找，一直找到window这个顶级作用域，
    如果还没有，则报一个变量未定义的错误。这样一级一级的往上查找，就形成了一个作用域链。
    而这里的这个s是在上一级作用域里定义并赋值的，所以这里会弹出str。


    当然，在fn方法运行的时候，变量n也是会象变量s那样的方式来查找，
    不过在这一级用域里已经定义了，所以就不会再往上一级作用域里去找了。


    js中的预解释：凡是带var和function关键字的，都会预解释。就是在执行代码之前，先执行


    在fn这个方法里，var n=6这个表达式相当于执行了三步，
    第一步是在脚本执行之前先定义一个变量n，
    第二步和第三步是当脚本执行到这一行的时候，出现一块内存来表示6并且把6赋值给n，即： var n和n=6;变量的定义是预解释的，但赋值是不预解释的。


    变量作用域：
    当一个函数在运行的时候，就形成了一个自己的私有作用域，这个私有的作用域会开成闭包（封闭的包）。
    预解释是在私用作用域里的预解释。
    在查找变量的时候先找自己的这个作用域里是不是定义了这个变量，自已这个作用域里如果没有，则再往上一级作用域里找。
    一直找到window，如果还找不到，则浏览器就要报错了。


    JS里，window是顶级作用域。
    * */
</script>
</body>
</html>